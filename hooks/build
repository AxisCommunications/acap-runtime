#!/bin/bash
# A script to allow building multiple targets from a single Dockerfile such
# that the repository does not need a separate Dockerfile for each build

# The differentiation between targets is done by looking for whether
# the image tag ends with "test"


if [[ $DOCKER_TAG == *test ]]
  then
    docker build -f $DOCKERFILE_PATH -t $IMAGE_NAME .
  else
    docker build --target=release -f $DOCKERFILE_PATH -t $IMAGE_NAME .
fi
