#!/bin/bash
# A script to allow building multiple targets from a single Dockerfile such
# that the repository does not need a separate Dockerfile for each build

# shellcheck disable=SC2001
RUNTIME_VERSION=$(echo "$IMAGE_NAME" | sed 's/.*\:\(.*\)-a.*/\1/')
export RUNTIME_VERSION

docker build . -f "${DOCKERFILE_PATH}" -t "$IMAGE_NAME"
docker build . -f "${DOCKERFILE_PATH}-containerized" -t "$IMAGE_NAME-containerized" --build-arg RUNTIME_VERSION
